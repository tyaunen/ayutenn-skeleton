RewriteEngine On

# ===============================================
# セキュリティ強化版 .htaccess
# ===============================================
# 許可リスト方式：
# - 静的ファイルは app/public/assets/ からのみ配信
# - それ以外のリクエストはすべて index.php にルーティング
# ===============================================

# 1. assets/ へのリクエスト → app/public/assets/ へリライト（許可された拡張子のみ）
RewriteRule ^assets/(.*\.(css|js|png|jpe?g|gif|svg|webp|ico|woff2?|ttf|eot|mp4|webm))$ app/public/assets/$1 [L,NC]

# 2. その他すべてのリクエスト → index.php に集約
RewriteRule ^(?!app/public/assets/).*$ app/public/index.php [QSA,L]
